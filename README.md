# ğŸ›ï¸ ì†Œë„ëª° í”„ë¡œì íŠ¸

ì´ ë¬¸ì„œëŠ” 'ì†Œë„ëª°' í”„ë¡œì íŠ¸ì˜ ê°œìš”ë¥¼ ì„¤ëª…í•˜ê³ , ìƒì„¸ ë¬¸ì„œë¡œ ì•ˆë‚´í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

## ğŸš€ í”„ë¡œì íŠ¸ ì†Œê°œ

-   **ëª©í‘œ:** Reactì™€ Firebaseë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ ìƒí’ˆ ì‡¼í•‘ëª° ì›¹ì‚¬ì´íŠ¸ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.
-   **ì£¼ìš” ê¸°ëŠ¥:** íšŒì›ê°€ì…/ë¡œê·¸ì¸, ìƒí’ˆ ëª©ë¡ ë° ìƒì„¸ ë³´ê¸°, ì¥ë°”êµ¬ë‹ˆ, ì£¼ë¬¸ ê´€ë¦¬, ì‹ ë¢°ë„ì™€ í™œë™ í¬ì¸íŠ¸ë¥¼ ë¶„ë¦¬í•œ ì´ì¤‘ íŠ¸ë™ ë³´ìƒ ì‹œìŠ¤í…œ, ì¹œêµ¬ ì´ˆëŒ€, ê´€ë¦¬ì í˜ì´ì§€, AI ìƒí’ˆ ì •ë³´ ìë™ ë“±ë¡, ì§€ëŠ¥í˜• ì•Œë¦¼í†¡ ì‹œìŠ¤í…œ, **ê³ ê° ì°¸ì—¬ ìœ ë„ë¥¼ ìœ„í•œ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ë¯¸ì…˜ ì‹œìŠ¤í…œ** ë“±

## ğŸ› ï¸ ì‚¬ìš©ëœ ê¸°ìˆ  ìŠ¤íƒ

-   **Core:** React, TypeScript, Vite
-   **Backend & Database:** Firebase (Firestore, Authentication, Storage)
    -   **Cloud Functions (v2):** ì„œë²„ë¦¬ìŠ¤ ë°±ì—”ë“œ ë¡œì§
    -   **Firebase Extensions:** ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• ìë™í™” (Resize Images)
-   **External Services:**
    -   **Google Gemini API:** AI ìƒí’ˆ ì •ë³´ ìë™ ì¶”ì¶œ
    -   **Google Cloud Secret Manager:** API í‚¤ ë³´ì•ˆ ê´€ë¦¬
    -   **NHN Cloud:** ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼í†¡ ë°œì†¡ ì¤‘ê³„ ì„œë¹„ìŠ¤
-   **Routing & State Management:**
    -   `react-router-dom`: í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¼ìš°íŒ…
    -   `React Context API`: ì „ì—­ ìƒíƒœ ê´€ë¦¬ (`useAuth`, `useCart` ë“±)
-   **Styling & UI:**
    -   `CSS Modules`: ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ ìŠ¤íƒ€ì¼ë§
    -   `lucide-react`: ê²½ëŸ‰ SVG ì•„ì´ì½˜
    -   `react-hot-toast`: ì „ì—­ ì•Œë¦¼(Toast) ë©”ì‹œì§€
    -   `react-beautiful-dnd`: ë“œë˜ê·¸ì•¤ë“œë¡­(ìˆœì„œ ë³€ê²½) ê¸°ëŠ¥
    -   `react-joyride`: ì¸í„°ë™í‹°ë¸Œ íŠœí† ë¦¬ì–¼ ê¸°ëŠ¥
-   **Utilities:**
    -   `dayjs`: ë‚ ì§œ ë° ì‹œê°„ ì²˜ë¦¬
-   **Testing & Deployment:**
    -   `Vitest` & `React Testing Library`: ì»´í¬ë„ŒíŠ¸ ë° ìœ ë‹› í…ŒìŠ¤íŠ¸
    -   `Vercel`: í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬

---

## ğŸ“„ ìƒì„¸ ë¬¸ì„œ ì•ˆë‚´

í”„ë¡œì íŠ¸ì˜ ë” ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

-   **[ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ì•„í‚¤í…ì²˜ (Architecture)](./ARCHITECTURE.md)**
    > í´ë” êµ¬ì¡°, ì£¼ìš” íŒŒì¼ ë° ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„œì…ë‹ˆë‹¤.

-   **[âœ¨ ì£¼ìš” ê¸°ëŠ¥ ëª…ì„¸ (Features)](./FEATURES.md)**
    > íšŒì›ê°€ì…ë¶€í„° ìƒí’ˆ ê´€ë¦¬, í¬ì¸íŠ¸ ì‹œìŠ¤í…œê¹Œì§€ ê° ê¸°ëŠ¥ì˜ ìƒì„¸í•œ ë™ì‘ íë¦„ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

-   **[ğŸ’¡ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë° ê°œì„  ì´ë ¥ (Troubleshooting)](./TROUBLESHOOTING.md)**
    > í”„ë¡œì íŠ¸ ì§„í–‰ ì¤‘ ë°œìƒí–ˆë˜ ì£¼ìš” ë¬¸ì œë“¤ê³¼ í•´ê²° ê³¼ì •ì„ ê¸°ë¡í•œ ê°œë°œ íšŒê³ ë¡ì…ë‹ˆë‹¤.

---

## ğŸš€ ì•ìœ¼ë¡œì˜ ê°œì„  ë°©í–¥

### 1. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±: "ë¯¸ë˜ì˜ ë²„ê·¸ë¥¼ ì˜ˆë°©í•˜ëŠ” ë³´í—˜" (ì§„í–‰ ì¤‘)
-   **ë‚´ìš©**: **Vitest**ì™€ **React Testing Library**ë¥¼ ë„ì…í•˜ì—¬ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ë¥¼ êµ¬ì¶•í•˜ê³  ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜(ìœ ë‹› í…ŒìŠ¤íŠ¸)ì™€ ì¼ë¶€ UI ì»´í¬ë„ŒíŠ¸(ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸)ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì™„ë£Œí–ˆìœ¼ë©°, ì ì°¨ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ë„“í˜€ë‚˜ê°ˆ ì˜ˆì •ì…ë‹ˆë‹¤.
-   **ê¸°ëŒ€ íš¨ê³¼**: ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìì‹ ê°ì„ ë†’ì´ê³ , ì¥ê¸°ì ìœ¼ë¡œ í›¨ì”¬ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 2. UI/UX ì¼ê´€ì„± í™•ë³´: "ì²´ê³„ì ì¸ ë””ìì¸ ì‹œìŠ¤í…œ êµ¬ì¶•"
-   **ë‚´ìš©**: **Storybook** ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸ë“¤ì„ ëª¨ì•„ë†“ì€ ë…ë¦½ì ì¸ **ë””ìì¸ ì‹œìŠ¤í…œ**ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.
-   **ê¸°ëŒ€ íš¨ê³¼**: ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ê³ , ì´ë¯¸ ë§Œë“¤ì–´ì§„ ë¶€í’ˆì„ ì¡°ë¦½í•˜ë“¯ ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ ë§¤ìš° ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### âœ… [ì‹ ê·œ] 3. ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ì‹œìŠ¤í…œ ê³ ë„í™”: "ë§¤ì¼ ë°©ë¬¸í•˜ê³  ì‹¶ì€ ì¦ê±°ìš´ ê²½í—˜"
-   **ë‚´ìš©**: í˜„ì¬ì˜ ë‹¬ì„±í˜• ë¯¸ì…˜ ì‹œìŠ¤í…œì„ ê¸°ë°˜ìœ¼ë¡œ, ë§¤ì¼ ê³¼ì œê°€ ë³€ê²½ë˜ëŠ” **'ì˜¤ëŠ˜ì˜ ë¯¸ì…˜'**, íŠ¹ì • ê¸°ê°„ì—ë§Œ ì°¸ì—¬í•  ìˆ˜ ìˆëŠ” **'ì´ë²¤íŠ¸ ë¯¸ì…˜'** ë“± ë‹¤ì±„ë¡œìš´ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ìš”ì†Œë¥¼ ë„ì…í•©ë‹ˆë‹¤.
-   **ê¸°ëŒ€ íš¨ê³¼**: ì‚¬ìš©ìì˜ ì¬ë°©ë¬¸ìœ¨ê³¼ ì°¸ì—¬ë„ë¥¼ ê·¹ëŒ€í™”í•˜ê³ , ë‹¨ìˆœí•œ ì‡¼í•‘ëª°ì„ ë„˜ì–´ ì‚¬ìš©ìì™€ í•¨ê»˜ ì„±ì¥í•˜ëŠ” ì»¤ë®¤ë‹ˆí‹°í˜• ì„œë¹„ìŠ¤ë¡œ ë°œì „ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ”§ ë°°í¬ & ë¡œì»¬ ê°œë°œ

-   **ë¡œì»¬ ì—ë®¬ë ˆì´í„°**:
    ```bash
    firebase emulators:start --only functions,firestore,auth
    ```
-   **Functions ë°°í¬**:
    ```bash
    firebase deploy --only functions
    ```
-   **í”„ë¡ íŠ¸ ë°°í¬**: Vercel ì—°ê²° (í™˜ê²½ë³€ìˆ˜ ë™ê¸°í™” í•„ìˆ˜)

---

### ğŸ” ì‹œí¬ë¦¿ & í™˜ê²½ ë³€ìˆ˜

#### í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ë³€ìˆ˜ (í•„ìˆ˜)

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë³€ìˆ˜ë“¤ì„ ì„¤ì •í•˜ì„¸ìš”:

```bash
# Firebase ì„¤ì • (í•„ìˆ˜)
VITE_FIREBASE_API_KEY=your-api-key-here
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.firebasestorage.app
VITE_FIREBASE_MESSAGING_SENDER_ID=your-messaging-sender-id
VITE_FIREBASE_APP_ID=your-app-id
VITE_FIREBASE_REGION=asia-northeast3

# ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (í•„ìˆ˜)
VITE_KAKAO_JS_KEY=your-kakao-js-key

# App Check (ì„ íƒ)
VITE_APP_CHECK_SITE_KEY=your-recaptcha-site-key
```

**ğŸ“ ë¹ ë¥¸ ì‹œì‘:**
1. í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env.local` íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”
2. `.env.example` íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì„¸ìš”
3. ê°œë°œ ì„œë²„ë¥¼ ì¬ì‹œì‘í•˜ì„¸ìš” (`npm run dev`)

**âš ï¸ ì¤‘ìš”**: 
- `.env.local` ë˜ëŠ” `.env` íŒŒì¼ì€ ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”! (`.gitignore`ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤)
- Firebase ì„¤ì • ê°’ì€ [Firebase ì½˜ì†”](https://console.firebase.google.com) > í”„ë¡œì íŠ¸ ì„¤ì • > ì¼ë°˜ íƒ­ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì¹´ì¹´ì˜¤ JavaScript í‚¤ëŠ” [ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†”](https://developers.kakao.com)ì—ì„œ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ğŸ“‹ í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿:**

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env.local` íŒŒì¼ì„ ìƒì„±í•˜ê³  ì•„ë˜ í…œí”Œë¦¿ì„ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”:

```bash
# Firebase ì„¤ì • (í•„ìˆ˜)
VITE_FIREBASE_API_KEY=
VITE_FIREBASE_AUTH_DOMAIN=
VITE_FIREBASE_PROJECT_ID=
VITE_FIREBASE_STORAGE_BUCKET=
VITE_FIREBASE_MESSAGING_SENDER_ID=
VITE_FIREBASE_APP_ID=
VITE_FIREBASE_REGION=asia-northeast3

# ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (í•„ìˆ˜)
VITE_KAKAO_JS_KEY=

# App Check (ì„ íƒ)
# VITE_APP_CHECK_SITE_KEY=
```

**ğŸ” í™˜ê²½ë³€ìˆ˜ ëˆ„ë½ ì‹œ:**
- ì—ëŸ¬ ë©”ì‹œì§€ì— ëˆ„ë½ëœ ë³€ìˆ˜ ëª©ë¡ê³¼ ì„¤ì • ë°©ë²•ì´ í‘œì‹œë©ë‹ˆë‹¤.
- `.env.local` íŒŒì¼ ê²½ë¡œë¥¼ í™•ì¸í•˜ì„¸ìš”.

#### Cloud Functions ì‹œí¬ë¦¿ (GCP Secret Manager)

| í‚¤ | ìœ„ì¹˜ | ì„¤ëª… |
|---|---|---|
| `GEMINI_API_KEY` | GCP Secret Manager | AI ìƒí’ˆì •ë³´ ì¶”ì¶œìš© (utils/gemini) |
| `NHN_API_KEY`, `NHN_APP_ID` | Secret Manager | ì•Œë¦¼í†¡ ì „ì†¡ìš© |
| `KAKAO_REST_KEY` | Secret Manager | ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸/í† í° ê²€ì¦ |
| `ê¸°íƒ€ API í‚¤` | Secret Manager | í•„ìš” ì‹œ ì¶”ê°€ |

### ğŸŒ CORS í—ˆìš© ë„ë©”ì¸

-   `https://sodo-songdo.store`
-   `https://www.sodo-songdo.store`
-   `https://sodomall.vercel.app`
-   `http://localhost:5173`

### ğŸ“š Functions ê°œìš”

#### Callable

| ì´ë¦„ | íŒŒì¼ | ì„¤ëª… |
|---|---|---|
| `validateCart` | `callable/orders.ts` | ì¥ë°”êµ¬ë‹ˆ ì„œë²„ ê²€ì¦ ë° ìˆ˜ëŸ‰ ë³´ì • |
| `submitOrder` | `callable/orders.ts` | ì£¼ë¬¸ í™•ì • |
| `addStockAndProcessWaitlist` | `callable/stock.ts` | ëŒ€ê¸°ì ì²˜ë¦¬ |
| `processReferralCode` | `callable/referrals.ts` | ì¶”ì²œì¸ ì½”ë“œ ì²˜ë¦¬ |
| ... | ... | ê¸°íƒ€ í¬ì¸íŠ¸/ë¯¸ì…˜/ìœ ì € ê´€ë ¨ |

#### HTTP

| í•¨ìˆ˜ëª… | íŒŒì¼ | ì„¤ëª… |
|---|---|---|
| `kakaoLogin` | `http/auth.ts` | ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ê²€ì¦ |
| `testNotifications` | `http/testNotifications.ts` | ì•Œë¦¼í†¡ ì „ì†¡ ì ê²€ |
| ... | ... | ë§ˆì´ê·¸ë ˆì´ì…˜/ìˆ˜ë™ íŠ¸ë¦¬ê±° |

#### Scheduled

| ìŠ¤ì¼€ì¤„ | íŒŒì¼ | ì„¤ëª… |
|---|---|---|
| ë§¤ì¼ 09:00 | `scheduled/notifications.ts` | í”½ì—… ì•Œë¦¼ |
| ë§¤ì¼ 19:00 | `scheduled/notifications.ts` | ì„ ì…ê¸ˆ ì•Œë¦¼ |
| ë§¤ì¼ 00:00 | `scheduled/points.ts` | í¬ì¸íŠ¸ ì†Œë©¸ |

#### Triggers

| ì»¬ë ‰ì…˜ | íŒŒì¼ | ì„¤ëª… |
|---|---|---|
| `orders/*` | `triggers/orders.ts` | ìƒì„±/ì—…ë°ì´íŠ¸ ì§‘ê³„ |
| `users/*` | `triggers/users.ts` | ê°€ì…/ë“±ê¸‰ ë³€ê²½ ì²˜ë¦¬ |
| `products/*` | `triggers/products.ts` | ì¬ê³ /íšŒì°¨ ì§‘ê³„ |
| `points/*` | `triggers/points.ts` | í¬ì¸íŠ¸ ë¡œê·¸ ì²˜ë¦¬ |