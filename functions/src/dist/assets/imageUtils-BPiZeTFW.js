const p=(e,r)=>{if(e.includes(`_${r}.webp`)||!e||!e.includes("firebasestorage.googleapis.com"))return e;try{const n=new URL(e),o="/o/",s=n.pathname.indexOf(o);if(s===-1)return e;const d=n.pathname.substring(0,s+o.length);let t=n.pathname.substring(s+o.length);for(;/%/.test(t);)try{const c=decodeURIComponent(t);if(c===t)break;t=c}catch{console.error("Malformed URI sequence detected during decoding:",t);break}const a=t.lastIndexOf("."),h=`${a===-1?t:t.substring(0,a)}_${r}.webp`;return n.pathname=d+encodeURIComponent(h),n.toString()}catch(n){return console.error("이미지 URL 최적화 중 오류 발생:",n),e}};export{p as g};
