import{r as x,u as L,a as U,b as O,c as T,j as t,L as V,R as j,d as G,N as v,O as K}from"./index-BMz7zIRN.js";import{t as g,c as $,n as C,g as P,a as q,e as J,m as _,b,f as Q,k as A}from"./ko-rCIX9F0R.js";import{C as Z}from"./chevron-left-DTstWtwR.js";import{C as R,B as ee}from"./calendar-days-C3Lc1TML.js";import{c as I}from"./createLucideIcon-Df3tO_ja.js";import{X as te}from"./x-BfIBbJBP.js";import{S as F}from"./shield-x-DqlWjWof.js";import{S as H,a as ne,G as se,C as W}from"./sparkles-CiURa8Z7.js";import{I as z}from"./info-DxE8bBlt.js";import{C as ae}from"./circle-x-fkkSg6hU.js";import{C as M}from"./circle-check-big-B897TBEZ.js";import{C as re}from"./circle-alert-CQEJXon4.js";import{T as oe}from"./trending-down-CaiddwcE.js";import{T as ie}from"./trending-up-BeywEaFl.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],le=I("bell-ring",ce);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],de=I("bell",ue);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],me=I("calendar-clock",fe);function k(e,n){const s=+g(e)-+g(n);return s<0?-1:s>0?1:s}function he(e){return $(e,Date.now())}function pe(e,n,s){const[a,r]=C(s?.in,e,n),l=a.getFullYear()-r.getFullYear(),d=a.getMonth()-r.getMonth();return l*12+d}function xe(e){return n=>{const a=(e?Math[e]:Math.trunc)(n);return a===0?0:a}}function je(e,n){return+g(e)-+g(n)}function ge(e,n){const s=g(e,n?.in);return s.setHours(23,59,59,999),s}function ye(e,n){const s=g(e,n?.in),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(23,59,59,999),s}function ve(e,n){const s=g(e,n?.in);return+ge(s,n)==+ye(s,n)}function Ne(e,n,s){const[a,r,l]=C(s?.in,e,e,n),d=k(r,l),o=Math.abs(pe(r,l));if(o<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-d*o);let u=k(r,l)===-d;ve(a)&&o===1&&k(a,l)===1&&(u=!1);const f=d*(o-+u);return f===0?0:f}function be(e,n,s){const a=je(e,n)/1e3;return xe(s?.roundingMethod)(a)}function ke(e,n,s){const a=q(),r=s?.locale??a.locale??J,l=2520,d=k(e,n);if(isNaN(d))throw new RangeError("Invalid time value");const o=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:d}),[u,f]=C(s?.in,...d>0?[n,e]:[e,n]),i=be(f,u),p=(P(f)-P(u))/1e3,c=Math.round((i-p)/60);let h;if(c<2)return s?.includeSeconds?i<5?r.formatDistance("lessThanXSeconds",5,o):i<10?r.formatDistance("lessThanXSeconds",10,o):i<20?r.formatDistance("lessThanXSeconds",20,o):i<40?r.formatDistance("halfAMinute",0,o):i<60?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",1,o):c===0?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",c,o);if(c<45)return r.formatDistance("xMinutes",c,o);if(c<90)return r.formatDistance("aboutXHours",1,o);if(c<_){const m=Math.round(c/60);return r.formatDistance("aboutXHours",m,o)}else{if(c<l)return r.formatDistance("xDays",1,o);if(c<b){const m=Math.round(c/_);return r.formatDistance("xDays",m,o)}else if(c<b*2)return h=Math.round(c/b),r.formatDistance("aboutXMonths",h,o)}if(h=Ne(f,u),h<12){const m=Math.round(c/b);return r.formatDistance("xMonths",m,o)}else{const m=h%12,y=Math.trunc(h/12);return m<3?r.formatDistance("aboutXYears",y,o):m<9?r.formatDistance("overXYears",y,o):r.formatDistance("almostXYears",y+1,o)}}function we(e,n){return ke(e,he(e),n)}const De=e=>{if(!e)return null;switch(e){case"ê³µêµ¬ì˜ ì‹ ":return{tier:"ê³µêµ¬ì˜ ì‹ ",icon:t.jsx(W,{size:16}),color:"var(--loyalty-god, #ffc107)"};case"ê³µêµ¬ì™•":return{tier:"ê³µêµ¬ì™•",icon:t.jsx(se,{size:16}),color:"var(--loyalty-king, #4caf50)"};case"ê³µêµ¬ìš”ì •":return{tier:"ê³µêµ¬ìš”ì •",icon:t.jsx(ne,{size:16}),color:"var(--loyalty-fairy, #2196f3)"};case"ê³µêµ¬ìƒˆì‹¹":return{tier:"ê³µêµ¬ìƒˆì‹¹",icon:t.jsx("i",{className:"seedling-icon-header",children:"ðŸŒ±"}),color:"var(--loyalty-sprout, #8bc34a)"};case"ì£¼ì˜ ìš”ë§":return{tier:"ì£¼ì˜ ìš”ë§",icon:t.jsx(H,{size:16}),color:"var(--loyalty-warning, #ff9800)"};case"ì°¸ì—¬ ì œí•œ":return{tier:"ì°¸ì—¬ ì œí•œ",icon:t.jsx(F,{size:16}),color:"var(--loyalty-restricted, #f44336)"};default:return null}},S={POINTS_EARNED:t.jsx(ie,{size:20,className:"icon-success"}),POINTS_USED:t.jsx(oe,{size:20,className:"icon-info"}),WAITLIST_CONFIRMED:t.jsx(M,{size:20,className:"icon-success"}),PAYMENT_CONFIRMED:t.jsx(ee,{size:20,className:"icon-success"}),PICKUP_REMINDER:t.jsx(me,{size:20,className:"icon-warning"}),PICKUP_TODAY:t.jsx(R,{size:20,className:"icon-warning"}),GENERAL_INFO:t.jsx(z,{size:20,className:"icon-info"}),ORDER_PICKED_UP:t.jsx(M,{size:20,className:"icon-success"}),NO_SHOW_WARNING:t.jsx(re,{size:20,className:"icon-danger"}),PARTICIPATION_RESTRICTED:t.jsx(F,{size:20,className:"icon-danger"}),TIER_UP:t.jsx(W,{size:20,className:"icon-tier-up"}),TIER_DOWN:t.jsx(H,{size:20,className:"icon-tier-down"}),success:t.jsx(M,{size:20,className:"icon-success"}),error:t.jsx(ae,{size:20,className:"icon-danger"}),default:t.jsx(z,{size:20,className:"icon-info"})},Me=e=>S[e]||S.default,Oe=({isOpen:e,onClose:n})=>{const s=L(),{userDocument:a}=O(),{notifications:r,unreadCount:l,markOneAsRead:d,markAllAsRead:o}=T(),u=x.useMemo(()=>a?De(a.loyaltyTier):null,[a]),f=i=>{i.read||d(i.id),i.link&&s(i.link),n()};return e?t.jsx("div",{className:"notification-modal-overlay",onClick:n,children:t.jsxs("div",{className:"notification-modal-content",onClick:i=>i.stopPropagation(),children:[t.jsxs("div",{className:"notification-modal-header",children:[t.jsx("h4",{children:"ì•Œë¦¼"}),t.jsx("button",{onClick:n,className:"modal-close-button",children:t.jsx(te,{size:24})})]}),t.jsxs("div",{className:"notification-modal-body",children:[l>0&&t.jsx("button",{onClick:o,className:"mark-all-read-btn-mobile",children:"ëª¨ë‘ ì½ìŒìœ¼ë¡œ í‘œì‹œ"}),t.jsx("div",{className:"notification-list",children:r.length>0?r.map(i=>t.jsxs("div",{className:`notification-item ${i.read?"read":""}`,onClick:()=>f(i),children:[t.jsx("div",{className:"notification-item-icon",children:Me(i.type)}),t.jsxs("div",{className:"notification-item-content",children:[t.jsx("p",{className:"notification-message",children:i.message}),t.jsx("span",{className:"notification-time",children:i.timestamp&&i.timestamp.toDate?we(i.timestamp.toDate(),{addSuffix:!0,locale:A}):""})]})]},i.id)):t.jsxs("div",{className:"notification-item no-notifications",children:[t.jsx(le,{size:20}),t.jsx("p",{children:"ìƒˆë¡œìš´ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤."})]})})]}),u&&a&&t.jsxs("div",{className:"notification-modal-footer",children:[t.jsx("div",{className:"footer-points-section",children:t.jsxs("span",{children:["ë‚´ ì‹ ë¢°ë„ í¬ì¸íŠ¸: ",t.jsxs("strong",{children:[(a.points||0).toLocaleString()," P"]})]})}),t.jsxs("div",{className:"footer-tier-section",style:{"--tier-color":u.color},children:[u.icon,t.jsxs("span",{children:["ë‚´ ë“±ê¸‰: ",t.jsx("strong",{children:u.tier})]})]})]})]})}):null},Ce=e=>{const[n,s]=x.useState(""),[a,r]=x.useState(!1),l=L(),d=U(),{user:o}=O(),{notifications:u,unreadCount:f}=T(),i=x.useMemo(()=>u.some(c=>c.type==="PICKUP_TODAY"&&!c.read),[u]);x.useEffect(()=>{s(Q(new Date,"M/d(EEE)",{locale:A}))},[]),x.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]);const p=x.useMemo(()=>{const{pathname:c}=d;if(Object.keys(e).length>0)return e;const h={"/":{showLogo:!0,showDate:!0,showBackButton:!1},"/cart":{title:"ìž¥ë°”êµ¬ë‹ˆ",showDate:!0,showBackButton:!1},"/mypage":{title:"ë§ˆì´íŽ˜ì´ì§€",showDate:!0,showBackButton:!1},"/onsite-sale":{title:"í˜„ìž¥ íŒë§¤",showDate:!0,showBackButton:!1},"/customer-center":{title:"ê³ ê°ì„¼í„°",showDate:!0,showBackButton:!1}};if(h[c])return h[c];const m={"/mypage/history":"ì˜ˆì•½ ë‚´ì—­","/mypage/points":"í¬ì¸íŠ¸ ë‚´ì—­","/mypage/orders":"ë‚˜ì˜ í”½ì—… ìº˜ë¦°ë”","/mypage/waitlist":"ëŒ€ê¸° ì‹ ì²­","/mypage/profile":"íšŒì› ì •ë³´"};for(const y in m)if(c.startsWith(y))return{title:m[y],showBackButton:!0,showDate:!1};return c.startsWith("/product/")?{title:"ìƒí’ˆ ìƒì„¸",showBackButton:!0,showDate:!1}:{title:"ì†Œë„ëª°",showBackButton:!0,showDate:!1}},[d.pathname,e]);return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"main-header customer-header-sticky",children:[t.jsxs("div",{className:"header-left",children:[p.showBackButton&&t.jsx("button",{onClick:()=>l(-1),className:"header-back-button","aria-label":"ë’¤ë¡œ ê°€ê¸°",children:t.jsx(Z,{size:24})}),p.showDate&&t.jsxs("button",{className:"header-date-button",onClick:()=>l("/mypage/history"),children:[t.jsx(R,{size:18}),t.jsx("span",{children:n})]})]}),t.jsxs("div",{className:"header-center",children:[p.title&&t.jsx("h1",{className:"header-page-title",children:p.title}),p.showLogo&&t.jsxs(V,{to:"/",className:"brand-text-logo-container",children:[t.jsx("span",{className:"brand-name",children:"ì†Œë„ëª°"}),t.jsx("span",{className:"store-name",children:"ì†¡ë„ëžœë“œë§ˆí¬ì "})]})]}),t.jsx("div",{className:"header-right",children:o&&t.jsxs("button",{className:"new-notification-button",onClick:()=>r(!0),"aria-label":`ì•Œë¦¼ ${f}ê°œ`,"data-tutorial-id":"header-notifications",children:[t.jsx(de,{size:22}),i&&t.jsx("span",{className:"pickup-indicator",children:"!"}),f>0&&!i&&t.jsx("span",{className:"notification-badge",children:f})]})})]}),t.jsx(Oe,{isOpen:a,onClose:()=>r(!1)})]})};var X={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},E=j.createContext&&j.createContext(X),Ie=["attr","size","title"];function Pe(e,n){if(e==null)return{};var s=_e(e,n),a,r;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function _e(e,n){if(e==null)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(n.indexOf(a)>=0)continue;s[a]=e[a]}return s}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},w.apply(this,arguments)}function B(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),s.push.apply(s,a)}return s}function D(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?B(Object(s),!0).forEach(function(a){ze(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function ze(e,n,s){return n=Se(n),n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function Se(e){var n=Ee(e,"string");return typeof n=="symbol"?n:n+""}function Ee(e,n){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,n);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Y(e){return e&&e.map((n,s)=>j.createElement(n.tag,D({key:s},n.attr),Y(n.child)))}function N(e){return n=>j.createElement(Be,w({attr:D({},e.attr)},n),Y(e.child))}function Be(e){var n=s=>{var{attr:a,size:r,title:l}=e,d=Pe(e,Ie),o=r||s.size||"1em",u;return s.className&&(u=s.className),e.className&&(u=(u?u+" ":"")+e.className),j.createElement("svg",w({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,d,{className:u,style:D(D({color:e.color||s.color},s.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),l&&j.createElement("title",null,l),e.children)};return E!==void 0?j.createElement(E.Consumer,null,s=>n(s)):n(X)}function Le(e){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function Te(e){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Ae(e){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function Re(e){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(e)}function Fe(e){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(e)}function He(e){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}const We=()=>{const{isAdmin:e}=O(),{reservationItemCount:n,waitlistItemCount:s}=G(),a=n+s,r=({isActive:l})=>"nav-link"+(l?" active":"");return t.jsxs("nav",{className:"bottom-nav",children:[t.jsxs(v,{to:"/",className:r,end:!0,children:[t.jsx(Le,{}),t.jsx("span",{children:"í™ˆ"})]}),t.jsxs(v,{to:"/onsite-sale",className:r,children:[t.jsx(Re,{}),t.jsx("span",{children:"í˜„ìž¥ íŒë§¤"})]}),t.jsxs(v,{to:"/cart",className:r,"data-tutorial-id":"bottom-nav-cart",children:[t.jsxs("div",{className:"cart-icon-wrapper",children:[t.jsx(Fe,{}),a>0&&t.jsx("span",{className:"cart-badge",children:a})]}),t.jsx("span",{children:"ìž¥ë°”êµ¬ë‹ˆ"})]}),t.jsxs(v,{to:"/customer-center",className:r,"data-tutorial-id":"bottom-nav-customer-center",children:[t.jsx(Te,{}),t.jsx("span",{children:"ê³ ê°ì„¼í„°"})]}),t.jsxs(v,{to:"/mypage",className:r,"data-tutorial-id":"bottom-nav-mypage",children:[t.jsx(He,{}),t.jsx("span",{children:"ë§ˆì´íŽ˜ì´ì§€"})]}),e&&t.jsxs(v,{to:"/admin",className:r,children:[t.jsx(Ae,{}),t.jsx("span",{children:"ê´€ë¦¬ìž"})]})]})},st=()=>t.jsxs("div",{className:"customer-layout-container",children:[t.jsx(Ce,{}),t.jsx("main",{className:"customer-main-content",children:t.jsx(K,{})}),t.jsx(We,{})]});export{st as default};
