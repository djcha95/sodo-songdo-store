import{b as j,r,Q as p,j as s}from"./index-BMz7zIRN.js";import{i as u}from"./tippy-BL_pV7HH.js";import{I as y}from"./SodomallLoader-CN_E-RXV.js";import{c as f}from"./createLucideIcon-Df3tO_ja.js";import{T as c}from"./trending-up-BeywEaFl.js";import{C as v}from"./circle-question-mark-e2kfLd7M.js";import{A as N,m as o}from"./proxy-CA4nXXUX.js";import{X as g}from"./x-BfIBbJBP.js";import{T as P}from"./trending-down-CaiddwcE.js";import{S as k}from"./shopping-cart-DDLkxA9X.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],C=f("history",S),I=i=>!i||typeof i.toDate!="function"?"-":i.toDate().toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),L=({isOpen:i,onClose:e})=>s.jsx(N,{children:i&&s.jsx(o.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:s.jsxs(o.div,{className:"modal-content",initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:300,damping:30},onClick:t=>t.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h4",{children:"✨ 소도몰 포인트 안내"}),s.jsx("button",{onClick:e,className:"modal-close-button",children:s.jsx(g,{size:24})})]}),s.jsxs("div",{className:"modal-body",children:[s.jsx("h5",{children:"💰 활동 포인트: 즐거운 활동이 포인트가 되어 돌아옵니다!"}),s.jsx("p",{children:"신뢰 등급과는 별개로, 소도몰에서의 다양한 활동을 통해 포인트를 쌓고, 특별한 혜택을 누릴 수 있습니다. 포인트는 사장님의 즐거운 활동에 대한 감사의 선물이에요!"}),s.jsx("h6",{children:"이렇게 쌓아요!"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"상품 픽업 완료:"})," 결제 금액의 0.5% 적립"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"매일 첫 로그인:"})," +1P"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"한 달 연속 출석:"})," +100P 보너스"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"친구 초대 성공:"})," +30P"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"리뷰 작성:"})," +5P"]})]}),s.jsx("h6",{children:"이렇게 사용해요!"}),s.jsx("ul",{children:s.jsxs("li",{children:[s.jsx("strong",{children:"대기 순번 상승권:"})," 50P를 사용하여 인기 상품의 대기 순번을 위로 올릴 수 있습니다."]})}),s.jsx("h6",{children:"🤝 우리 모두의 약속"}),s.jsx("p",{children:"원활하고 공정한 공동구매를 위해, 노쇼(미픽업)나 마감 임박 취소 시에는 활동 포인트가 일부 차감될 수 있어요. 모두를 위한 약속이랍니다!"})]})]})})}),b=({log:i})=>{const e=i.amount>0;return s.jsxs("li",{className:"point-history-item",children:[s.jsx("div",{className:"point-item-icon","data-positive":e,children:e?s.jsx(c,{size:20}):s.jsx(P,{size:20})}),s.jsxs("div",{className:"point-item-details",children:[s.jsx("span",{className:"point-item-reason",children:i.reason}),s.jsxs("div",{className:"point-item-meta",children:[s.jsx("span",{className:"point-item-date",children:I(i.createdAt)}),i.orderId&&s.jsx(u,{content:`주문 ID: ${i.orderId}`,children:s.jsx("span",{className:"point-item-order-ref",children:s.jsx(k,{size:12})})})]})]}),s.jsxs("div",{className:`point-item-amount ${e?"positive":"negative"}`,children:[e?"+":"",i.amount.toLocaleString()," P"]})]})},Q=()=>{const{user:i,userDocument:e}=j(),[t,l]=r.useState([]),[d,h]=r.useState(!0),[m,a]=r.useState(!1);r.useEffect(()=>{i?.uid&&p(i.uid,50).then(l).catch(n=>console.error("포인트 내역 로딩 실패:",n)).finally(()=>h(!1))},[i]);const x=()=>d?s.jsx("div",{className:"point-history-loader",children:s.jsx(y,{})}):t.length===0?s.jsx("div",{className:"point-history-message",children:"포인트 변동 내역이 없습니다."}):s.jsx("ul",{className:"point-history-list",children:t.map(n=>s.jsx(b,{log:n},n.id))});return s.jsxs("div",{className:"point-history-page-container",children:[s.jsxs("div",{className:"point-history-container",children:[s.jsxs("header",{className:"point-history-header",children:[s.jsxs("div",{className:"page-title-wrapper",children:[s.jsx(C,{size:24}),s.jsx("h2",{children:"포인트 내역"})]}),s.jsxs("div",{className:"current-points-display-v2",children:[s.jsxs("div",{className:"points-label",children:[s.jsx(c,{size:18}),s.jsx("span",{children:"현재 활동 포인트"})]}),s.jsx("div",{className:"points-value",children:s.jsxs("strong",{children:[(e?.points||0).toLocaleString()," P"]})})]})]}),s.jsxs("main",{className:"point-history-content",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h4",{children:"최근 내역"}),s.jsxs("button",{onClick:()=>a(!0),className:"guide-button",children:[s.jsx(v,{size:16}),"포인트 안내"]})]}),x()]})]}),s.jsx(L,{isOpen:m,onClose:()=>a(!1)})]})};export{Q as default};
