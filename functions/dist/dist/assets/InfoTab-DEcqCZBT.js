import{r as d,j as n,R as I,ay as ae}from"./index-BMz7zIRN.js";import{S as ie}from"./square-pen-CwtIThVX.js";import{c as re}from"./createLucideIcon-Df3tO_ja.js";import{I as Z}from"./info-DxE8bBlt.js";import{U as oe,P as le,M as ce}from"./user-B2WtjEKL.js";import{M as ue}from"./CustomerCenterPage-BFpkv3l_.js";import{C as de}from"./clock-D_nK6rhO.js";import"./circle-plus-DMyLxw0U.js";import"./x-BfIBbJBP.js";import"./check-6pj1M3ks.js";import"./chevron-down-BK2KvEme.js";import"./SodomallLoader-CN_E-RXV.js";import"./triangle-alert-DUarG1oM.js";import"./save-B2IXE8Sx.js";import"./users-L5EP99wQ.js";import"./circle-question-mark-e2kfLd7M.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],he=re("building",pe),y=({value:a,onSave:e,isAdmin:s,as:t="input",className:p="",placeholder:f="(내용 없음)"})=>{const[r,g]=d.useState(!1),[x,l]=d.useState(a),k=d.useRef(null);d.useEffect(()=>{l(a)},[a]),d.useEffect(()=>{if(r&&(k.current?.focus(),t==="textarea"&&k.current)){const o=k.current;o.selectionStart=o.selectionEnd=o.value.length}},[r,t]);const v=()=>{x!==a&&e(x),g(!1)},b=o=>{o.key==="Enter"&&!o.shiftKey?(o.preventDefault(),v()):o.key==="Escape"&&(l(a),g(!1))};if(!s)return n.jsx("span",{className:p,children:a||""});if(r){const o={ref:k,value:x,onChange:w=>l(w.target.value),onBlur:v,onKeyDown:b,className:"inline-edit-input"};return t==="textarea"?n.jsx("textarea",{...o,rows:4}):n.jsx("input",{...o})}return n.jsxs("span",{className:`${p} editable`,onClick:()=>g(!0),children:[a||n.jsx("span",{className:"placeholder-text",children:f}),n.jsx(ie,{size:12,className:"edit-pencil-icon"})]})},S=typeof window<"u"&&typeof document<"u"?d.useLayoutEffect:d.useEffect,m=(a,e,s)=>{S(()=>{if(!a||!s)return;const t=function(){for(var p=arguments.length,f=new Array(p),r=0;r<p;r++)f[r]=arguments[r];return f===void 0?s(a):s(a,...f)};return kakao.maps.event.addListener(a,e,t),()=>{kakao.maps.event.removeListener(a,e,t)}},[a,e,s])},A="__react-kakao-maps-sdk__";let D=function(a){return a[a.INITIALIZED=0]="INITIALIZED",a[a.LOADING=1]="LOADING",a[a.SUCCESS=2]="SUCCESS",a[a.FAILURE=3]="FAILURE",a}({});const fe=`${A}_Loader`;class u{static loadEventCallback=new Set;callbacks=[];done=!1;loading=!1;errors=[];constructor(e){let{appkey:s,id:t=fe,libraries:p=[],nonce:f,retries:r=3,url:g="//dapi.kakao.com/v2/maps/sdk.js"}=e;if(this.id=t,this.appkey=s,this.libraries=p,this.nonce=f,this.retries=r,this.url=g,u.instance&&!u.equalOptions(this.options,u.instance.options)&&!u.equalOptions(this.options,u.instance.options))switch(u.instance.status){case D.FAILURE:throw new Error(`Loader must not be called again with different options. 
${JSON.stringify(this.options,null,2)}
!==
${JSON.stringify(u.instance.options,null,2)}`);default:u.instance.reset(),u.instance=this;break}return u.instance||(u.instance=this),u.instance}get options(){return{appkey:this.appkey,id:this.id,libraries:this.libraries,nonce:this.nonce,retries:this.retries,url:this.url}}static addLoadEventLisnter(e){return window.kakao&&window.kakao.maps&&window.kakao.maps.load(e),u.loadEventCallback.add(e),e}static removeLoadEventLisnter(e){return u.loadEventCallback.delete(e)}load(){return new Promise((e,s)=>{this.loadCallback(t=>{t?s(t):e(window.kakao)})})}get status(){return this.onEvent?D.FAILURE:this.done?D.SUCCESS:this.loading?D.LOADING:D.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}loadCallback(e){this.callbacks.push(e),this.execute()}resetIfRetryingFailed(){this.failed&&this.reset()}reset(){this.deleteScript(),this.done=!0,this.loading=!1,this.errors=[],this.onEvent=void 0}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.kakao&&window.kakao.maps){console.warn("Kakao Maps이 이미 외부 요소에 의해 로딩되어 있습니다.설정한 옵션과 일치 하지 않을 수 있으며, 이에 따른 예상치 동작이 발생할 수 있습니다."),window.kakao.maps.load(this.callback);return}this.loading||(this.loading=!0,this.setScript())}}setScript(){document.getElementById(this.id)&&this.callback();const e=this.createUrl(),s=document.createElement("script");s.id=this.id,s.type="text/javascript",s.src=e,s.onerror=this.loadErrorCallback.bind(this),s.onload=this.callback.bind(this),s.defer=!0,s.async=!0,this.nonce&&(s.nonce=this.nonce),document.head.appendChild(s)}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const s=this.errors.length*2**this.errors.length;console.log(`Failed to load Kakao Maps script, retrying in ${s} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},s)}else this.done=!0,this.loading=!1,this.onEvent=this.errors[this.errors.length-1],this.callbacks.forEach(s=>{s(this.onEvent)}),this.callbacks=[],u.loadEventCallback.forEach(s=>{s(this.onEvent)})}createUrl(){let e=this.url;return e+=`?appkey=${this.appkey}`,this.libraries.length&&(e+=`&libraries=${this.libraries.join(",")}`),e+="&autoload=false",e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}callback(){kakao.maps.load(()=>{u.instance.done=!0,u.instance.loading=!1,u.instance.callbacks.forEach(e=>{e(u.instance.onEvent)}),u.instance.callbacks=[],u.loadEventCallback.forEach(e=>{e(u.instance.onEvent)})})}static equalOptions(e,s){if(e.appkey!==s.appkey||e.id!==s.id||e.libraries.length!==s.libraries.length)return!1;for(let t=0;t<e.libraries.length;++t)if(e.libraries[t]!==s.libraries[t])return!1;return!(e.nonce!==s.nonce||e.retries!==s.retries||e.url!==s.url)}}const h=function(a,e){for(var s=arguments.length,t=new Array(s>2?s-2:0),p=2;p<s;p++)t[p-2]=arguments[p];S(()=>{!a||t.every(f=>typeof f>"u")||a[e].call(a,...t)},[a,e,...t])},q=I.createContext(void 0),me=I.forwardRef(function(e,s){let{id:t,as:p,children:f,center:r,isPanto:g=!1,padding:x=32,disableDoubleClick:l,disableDoubleClickZoom:k,draggable:v,zoomable:b,keyboardShortcuts:o,level:w,maxLevel:C,minLevel:R,mapTypeId:E,projectionId:z,scrollwheel:P,tileAnimation:L,onBoundsChanged:N,onCenterChanged:O,onClick:c,onDoubleClick:K,onDrag:W,onDragEnd:H,onDragStart:B,onIdle:G,onMaptypeidChanged:J,onMouseMove:V,onRightClick:F,onTileLoaded:Q,onZoomChanged:X,onZoomStart:Y,onCreate:T,..._}=e;const ee=p||"div",[U,se]=d.useState(!1),[i,te]=d.useState(),$=d.useRef(null);return S(()=>{const j=u.addLoadEventLisnter(M=>se(!M));return()=>{u.removeLoadEventLisnter(j)}},[]),S(()=>{if(!U)return;const j=$.current;if(!j)return;const M="lat"in r?new kakao.maps.LatLng(r.lat,r.lng):new kakao.maps.Coords(r.x,r.y),ne=new kakao.maps.Map(j,{center:M,disableDoubleClick:l,disableDoubleClickZoom:k,draggable:v,keyboardShortcuts:o,level:w,mapTypeId:typeof E=="string"?kakao.maps.MapTypeId[E]:E,projectionId:z,scrollwheel:P,tileAnimation:L});return te(ne),()=>{j.innerHTML=""}},[U,l,k,L]),d.useImperativeHandle(s,()=>i,[i]),S(()=>{!i||!T||T(i)},[i,T]),S(()=>{if(!i)return;let j=i.getCenter();j instanceof kakao.maps.Coords&&(j=j.toLatLng());const M="lat"in r?new kakao.maps.LatLng(r.lat,r.lng):new kakao.maps.Coords(r.x,r.y);M instanceof kakao.maps.LatLng&&M.equals(j)||M instanceof kakao.maps.Coords&&M.toLatLng().equals(j)||(g?i.panTo(M,x):i.setCenter(M))},[i,r.lat,r.lng,r.x,r.y]),h(i,"setDraggable",v),h(i,"setZoomable",b),h(i,"setKeyboardShortcuts",o),h(i,"setLevel",w),h(i,"setMapTypeId",U?typeof E=="string"?kakao.maps.MapTypeId[E]:E:void 0),h(i,"setProjectionId",z),h(i,"setMinLevel",C),h(i,"setMaxLevel",R),m(i,"bounds_changed",N),m(i,"center_changed",O),m(i,"click",c),m(i,"dblclick",K),m(i,"drag",W),m(i,"dragstart",B),m(i,"dragend",H),m(i,"idle",G),m(i,"maptypeid_changed",J),m(i,"mousemove",V),m(i,"rightclick",F),m(i,"tilesloaded",Q),m(i,"zoom_changed",X),m(i,"zoom_start",Y),n.jsxs(n.Fragment,{children:[n.jsx(ee,{id:t||`${A}_Map`,..._,ref:$}),i&&n.jsx(q.Provider,{value:i,children:f})]})}),ke=a=>{const e=d.useContext(q);if(!e)throw new Error(`${a+" Component"} must exist inside Map Component!`);return e},ge=I.forwardRef(function(e,s){let{map:t,position:p,marker:f,children:r,altitude:g,disableAutoPan:x,range:l,removable:k,zIndex:v,onCreate:b}=e;const o=d.useMemo(()=>{const C=document.createElement("div");return C.style.display="none",new kakao.maps.InfoWindow({altitude:g,disableAutoPan:x,range:l,removable:k,zIndex:v,content:C,position:p})},[x,k]),w=d.useMemo(()=>o.getContent(),[o]);return d.useImperativeHandle(s,()=>o,[o]),d.useLayoutEffect(()=>(o.open(t,f),()=>{o.close()}),[t,f]),d.useLayoutEffect(()=>{b&&b(o)},[o,b]),h(o,"setPosition",p),h(o,"setAltitude",g),h(o,"setRange",l),h(o,"setZIndex",v),ae.createPortal(r,w.parentElement??w)}),ve=I.createContext(void 0),xe=I.forwardRef(function(e,s){let{map:t,position:p,children:f,altitude:r,clickable:g,draggable:x,image:l,infoWindowOptions:k,onCreate:v,onClick:b,onDragEnd:o,onDragStart:w,onMouseOut:C,onMouseOver:R,opacity:E,range:z,title:P,zIndex:L}=e;const N=d.useContext(ve),O=d.useMemo(()=>l&&new kakao.maps.MarkerImage(l.src,new kakao.maps.Size(l.size.width,l.size.height),{alt:l.options?.alt,coords:l.options?.coords,offset:l.options?.offset&&new kakao.maps.Point(l.options?.offset.x,l.options?.offset.y),shape:l.options?.shape,spriteOrigin:l.options?.spriteOrigin&&new kakao.maps.Point(l.options?.spriteOrigin.x,l.options?.spriteOrigin.y),spriteSize:l.options?.spriteSize&&new kakao.maps.Size(l.options?.spriteSize.width,l.options?.spriteSize.height)}),[JSON.stringify(l)]),c=d.useMemo(()=>new kakao.maps.Marker({altitude:r,clickable:g,draggable:x,image:O,opacity:E,range:z,title:P,zIndex:L,position:p}),[]);return d.useImperativeHandle(s,()=>c,[c]),d.useLayoutEffect(()=>N?(N.addMarker(c,!0),()=>N.removeMarker(c,!0)):(c.setMap(t),()=>c.setMap(null)),[t,N,c]),d.useLayoutEffect(()=>{v&&v(c)},[c,v]),h(c,"setPosition",p),h(c,"setImage",O),h(c,"setAltitude",r),h(c,"setClickable",g),h(c,"setDraggable",x),h(c,"setOpacity",E),h(c,"setRange",z),h(c,"setTitle",P),h(c,"setZIndex",L),m(c,"click",b),m(c,"dragstart",w),m(c,"dragend",o),m(c,"mouseout",C),m(c,"mouseover",R),f?n.jsx(ge,{position:p,map:t,marker:c,altitude:k?.altitude,disableAutoPan:k?.disableAutoPan,range:k?.range,removable:k?.removable,zIndex:k?.zIndex,children:f}):null}),je=I.forwardRef(function(e,s){let{position:t,...p}=e;const f=ke("MapMarker"),r=d.useMemo(()=>"lat"in t?new kakao.maps.LatLng(t.lat,t.lng):new kakao.maps.Coords(t.x,t.y).toLatLng(),[t.lat,t.lng,t.x,t.y]);return n.jsx(xe,{map:f,position:r,...p,ref:s})}),ye=({storeName:a,latitude:e,longitude:s})=>{if(!e||!s)return n.jsx("div",{className:"map-placeholder",children:"정확한 위치 정보가 등록되지 않았습니다."});const t={lat:e,lng:s};return n.jsx(me,{center:t,style:{width:"100%",height:"250px",borderRadius:"var(--border-radius-md)"},level:3,children:n.jsx(je,{position:t,children:n.jsx("div",{style:{padding:"5px",color:"#000"},children:a})})})},Ke=({editableInfo:a,updateField:e,isAdmin:s})=>n.jsxs("section",{className:"service-section",children:[n.jsxs("div",{className:"info-item",children:[n.jsxs("span",{className:"info-label",children:[n.jsx(he,{size:14})," 상호"]}),n.jsx(y,{value:a.name,onSave:t=>e("name",t),isAdmin:s,className:"info-value"})]}),n.jsxs("div",{className:"info-item",children:[n.jsxs("span",{className:"info-label",children:[n.jsx(Z,{size:14})," 한 줄 설명"]}),n.jsx(y,{value:a.description,onSave:t=>e("description",t),isAdmin:s,as:"textarea",className:"info-value"})]}),n.jsxs("div",{className:"info-item",children:[n.jsxs("span",{className:"info-label",children:[n.jsx(oe,{size:14})," 대표자명"]}),n.jsx(y,{value:a.representative,onSave:t=>e("representative",t),isAdmin:s,className:"info-value"})]}),n.jsxs("div",{className:"info-item",children:[n.jsxs("span",{className:"info-label",children:[n.jsx(Z,{size:14})," 사업자등록번호"]}),n.jsx(y,{value:a.businessNumber,onSave:t=>e("businessNumber",t),isAdmin:s,className:"info-value"})]}),n.jsxs("div",{className:"info-item",children:[n.jsxs("span",{className:"info-label",children:[n.jsx(le,{size:14})," 연락처"]}),s?n.jsx(y,{value:a.phoneNumber,onSave:t=>e("phoneNumber",t),isAdmin:s,className:"info-value"}):n.jsx("a",{href:`tel:${a.phoneNumber}`,className:"info-value link-value",children:a.phoneNumber})]}),n.jsxs("div",{className:"info-item",children:[n.jsxs("span",{className:"info-label",children:[n.jsx(ce,{size:14})," 이메일"]}),s?n.jsx(y,{value:a.email,onSave:t=>e("email",t),isAdmin:s,className:"info-value"}):n.jsx("a",{href:`mailto:${a.email}`,className:"info-value link-value",children:a.email})]}),n.jsxs("div",{className:"info-item",children:[n.jsxs("span",{className:"info-label",children:[n.jsx(ue,{size:14})," 카카오톡 채널 ID"]}),n.jsx(y,{value:a.kakaotalkChannelId||"",onSave:t=>e("kakaotalkChannelId",t),isAdmin:s,className:"info-value"})]}),n.jsxs("div",{className:"info-item",children:[n.jsxs("span",{className:"info-label",children:[n.jsx(de,{size:14})," 운영 시간"]}),n.jsx(y,{value:a.operatingHours.join(`
`),onSave:t=>e("operatingHours",t.split(`
`)),isAdmin:s,as:"textarea",className:"info-value operating-hours-list"})]}),n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"주소"}),n.jsx(y,{value:a.address,onSave:t=>e("address",t),isAdmin:s,className:"info-value"})]}),s&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"위도 (Latitude)"}),n.jsx(y,{value:String(a.latitude||""),onSave:t=>e("latitude",Number(t)||null),isAdmin:s,className:"info-value"})]}),n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"경도 (Longitude)"}),n.jsx(y,{value:String(a.longitude||""),onSave:t=>e("longitude",Number(t)||null),isAdmin:s,className:"info-value"})]})]}),n.jsx("div",{className:"map-container",children:n.jsx(ye,{storeName:a.name,latitude:a.latitude,longitude:a.longitude})})]});export{Ke as default};
