# 관리자 페이지 실운영 기준 점검 보고서

**작성일**: 2025년 1월  
**점검 기준**: 실운영 필수 / 위험 / 불필요 기능 분류

---

## 📊 관리자 페이지 분류표

| 페이지 | 경로 | 분류 | UI 숨김 | 라우트 차단 | 서버 권한 검증 | 비고 |
|--------|------|------|---------|------------|--------------|------|
| **대시보드** | `/admin/dashboard` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 판매 현황 모니터링 필수 |
| **픽업 체크** | `/admin/pickup-check` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 일일 픽업 처리 필수 |
| **빠른 체크** | `/admin/quick-check` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 빠른 주문 확인 필수 |
| **선입금 체크** | `/admin/prepaid-check` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 선입금 확인 필수 |
| **상품 목록** | `/admin/products` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 상품 관리 필수 |
| **상품 추가** | `/admin/products/add` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 신규 상품 등록 필수 |
| **판매 회차 편집** | `/admin/products/edit/:id/:roundId` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 상품 정보 수정 필수 |
| **재고 관리** | `/admin/stock` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 재고 조정 필수 |
| **주문 관리** | `/admin/orders` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 주문 조회/관리 필수 |
| **주문 생성** | `/admin/create-order` | ⚠️ 위험 | ❌ | ❌ | ✅ | 관리자 직접 주문 생성 (주의 필요) |
| **사용자 목록** | `/admin/users` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 고객 관리 필수 |
| **사용자 상세** | `/admin/users/:userId` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 고객 상세 정보 필수 |
| **시스템 도구** | `/admin/tools` | ⚠️ 위험 | ❌ | ❌ | ⚠️ 확인 필요 | 재고 통계 재구축 등 (위험 작업) |
| **데이터 보정** | `/admin/data` | ⚠️ 위험 | ✅ 숨김 권장 | ✅ 차단 권장 | ✅ | 전체 데이터 재계산 (매우 위험) |
| **게시판 관리** | `/admin/board` | ❌ 불필요 | ✅ 숨김 | ✅ 차단 | ⚠️ 확인 필요 | 현재 사용 안 함 |
| **AI 상품 추천** | `/admin/ai-product` | ❌ 불필요 | ✅ 숨김 | ✅ 차단 | ⚠️ 확인 필요 | 실험적 기능 |
| **카테고리 관리** | `/admin/categories` | ⚠️ 위험 | ❌ | ❌ | ✅ | 카테고리 변경 시 영향 큼 |
| **배너 관리** | `/admin/banners` | ✅ 실운영 필수 | ❌ | ❌ | ✅ | 홈페이지 배너 관리 필수 |
| **추첨 이벤트** | `/admin/events/:productId/:roundId` | ⚠️ 위험 | ❌ | ❌ | ✅ | 추첨 이벤트 관리 (주의 필요) |
| **앵콜 관리** | `/admin/encore` | ❌ 불필요 | ✅ 숨김 | ✅ 차단 | ⚠️ 확인 필요 | 현재 사용 안 함 |
| **쿠폰 관리** | `/admin/coupons` | ❌ 불필요 | ✅ 숨김 | ✅ 차단 | ⚠️ 확인 필요 | 현재 사용 안 함 |

---

## 🔴 위험 기능 상세 분석

### 1. 주문 생성 (`/admin/create-order`)
- **위험도**: 중
- **이유**: 관리자가 직접 주문을 생성할 수 있어 실수로 잘못된 주문이 생성될 수 있음
- **권장 조치**: 
  - 사용 시 확인 모달 강화
  - 로그 기록 필수
  - 서버 권한 검증 ✅ (확인됨)

### 2. 시스템 도구 (`/admin/tools`)
- **위험도**: 높음
- **이유**: 재고 통계 재구축 등 전체 데이터에 영향을 미치는 작업
- **권장 조치**:
  - 마스터 권한만 접근 가능하도록 제한
  - 실행 전 확인 절차 강화
  - 서버 권한 검증 ⚠️ (확인 필요)

### 3. 데이터 보정 (`/admin/data`)
- **위험도**: 매우 높음
- **이유**: 전체 사용자 데이터를 재계산하여 덮어쓰는 작업
- **권장 조치**:
  - ✅ UI에서 숨김 처리 권장
  - ✅ 라우트 접근 차단 권장
  - 마스터 권한만 접근 가능하도록 제한
  - 서버 권한 검증 ✅ (확인됨)

### 4. 카테고리 관리 (`/admin/categories`)
- **위험도**: 중
- **이유**: 카테고리 변경 시 상품 분류에 영향
- **권장 조치**:
  - 변경 시 확인 절차 강화
  - 서버 권한 검증 ✅ (확인됨)

### 5. 추첨 이벤트 (`/admin/events/:productId/:roundId`)
- **위험도**: 중
- **이유**: 추첨 결과에 직접적인 영향
- **권장 조치**:
  - 실행 시 확인 절차 강화
  - 서버 권한 검증 ✅ (확인됨)

---

## ❌ 불필요 기능 상세 분석

### 1. 게시판 관리 (`/admin/board`)
- **이유**: 현재 사용하지 않는 기능
- **권장 조치**: 
  - ✅ UI에서 숨김 처리
  - ✅ 라우트 접근 차단
  - 서버 권한 검증 ⚠️ (확인 필요)

### 2. AI 상품 추천 (`/admin/ai-product`)
- **이유**: 실험적 기능으로 실운영에서 사용하지 않음
- **권장 조치**:
  - ✅ UI에서 숨김 처리
  - ✅ 라우트 접근 차단
  - 서버 권한 검증 ⚠️ (확인 필요)

### 3. 앵콜 관리 (`/admin/encore`)
- **이유**: 현재 사용하지 않는 기능
- **권장 조치**:
  - ✅ UI에서 숨김 처리
  - ✅ 라우트 접근 차단
  - 서버 권한 검증 ⚠️ (확인 필요)

### 4. 쿠폰 관리 (`/admin/coupons`)
- **이유**: 현재 사용하지 않는 기능
- **권장 조치**:
  - ✅ UI에서 숨김 처리
  - ✅ 라우트 접근 차단
  - 서버 권한 검증 ⚠️ (확인 필요)

---

## ✅ 실운영 필수 기능

다음 기능들은 실운영에 필수적이며, 정상적으로 작동해야 합니다:

1. **대시보드** - 판매 현황 모니터링
2. **픽업 체크** - 일일 픽업 처리
3. **빠른 체크** - 빠른 주문 확인
4. **선입금 체크** - 선입금 확인
5. **상품 관리** (목록/추가/편집) - 상품 정보 관리
6. **재고 관리** - 재고 조정
7. **주문 관리** - 주문 조회/관리
8. **사용자 관리** (목록/상세) - 고객 관리
9. **배너 관리** - 홈페이지 배너 관리

---

## 🔒 권한 검증 현황

### 클라이언트 권한 검증
- ✅ `AdminRoute` 컴포넌트에서 `isAdmin` 체크
- ✅ `src/main.tsx`에서 관리자 라우트 보호
- ⚠️ **주의**: 클라이언트 권한 검증만으로는 부족함 (서버 검증 필수)

### 서버 권한 검증
- ✅ 대부분의 Cloud Functions에서 관리자 권한 검증 수행
- ✅ `createOrderAsAdmin`: 서버에서 권한 검증 ✅
- ✅ `setUserRole`: 서버에서 권한 검증 ✅
- ✅ `reaggregateAllUserData`: 서버에서 권한 검증 ✅
- ⚠️ 일부 HTTP 함수는 권한 검증이 누락될 수 있음 (확인 필요)

---

## 📌 권장 조치 사항

### 즉시 조치 필요
1. **불필요 기능 UI 숨김 및 라우트 차단**
   - 게시판 관리, AI 상품 추천, 앵콜 관리, 쿠폰 관리
   
2. **위험 기능 접근 제한**
   - 데이터 보정 도구: 마스터 권한만 접근 가능하도록 제한
   - 시스템 도구: 마스터 권한만 접근 가능하도록 제한

3. **서버 권한 검증 강화**
   - 모든 관리자 기능에 서버 권한 검증 추가
   - HTTP 함수에도 권한 검증 추가

### 나중에 정리할 사항
1. 불필요 기능 완전 제거 (코드 정리)
2. 위험 기능 사용 로그 기록 강화
3. 관리자 활동 감사 로그 시스템 구축









