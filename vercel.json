{
  "version": 2,
  "routes": [
    { "src": "^/api/og$", "dest": "/api/og" },
    { "src": "^/api/img$", "dest": "/api/img" },
    { "src": "^/api/thumbnail$", "dest": "/api/thumbnail" }, 
    { "src": "^/api/product$", "dest": "/api/product" },

    {
      "src": "^/api/(?!og$)(?!img$)(?!product$)(.*)",
      "dest": "https://asia-northeast3-sso-do.cloudfunctions.net/$1"
    },

    { "src": "^/assets/(.*)$", "dest": "/assets/$1" },

    {
      "src": "^/(.*)\\.(css|js|mjs|map|png|jpg|jpeg|webp|gif|svg|ico|txt|xml|json|html|woff2?)$",
      "dest": "/$1.$2"
    },

    {
      "src": "^/product/([A-Za-z0-9_-]+)$",
      "has": [
        {
          "type": "header",
          "key": "user-agent",
          "value": ".*(KakaoTalk|kakaotalk|facebookexternalhit|Facebot|Twitterbot|Slackbot|Discordbot|WhatsApp|LinkedInBot|Googlebot|bingbot|Yeti|Daum|Instagram).*"
        }
      ],
      "dest": "/api/og?id=$1"
    },

    { "src": "^/product/.*$", "dest": "/index.html" },
    { "src": "^(?!/api/).*$", "dest": "/index.html" }
  ]
}